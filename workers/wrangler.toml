name = "services-api"
main = "workers/worker.ts"
compatibility_date = "2026-01-13"
workers_dev = true

# Set your Cloudflare account ID here or add it with `wrangler publish --account-id <id>`
# account_id = "<YOUR_ACCOUNT_ID>"

# Example of adding a route (if you want to bind worker to a route on your domain):
# route = "example.com/api/*"

[build]
  command = ""

# NOTE: We recommend using `wrangler secret put` to set the PAYSTACK key and SUPABASE keys.
# For example:
#   wrangler secret put PAYSTACK_SECRET_KEY
#   wrangler secret put SUPABASE_SERVICE_ROLE_KEY
#   wrangler secret put PAYSTACK_WEBHOOK_SECRET
#   wrangler secret put ADMIN_SECRET
# You can also add variables in the dashboard or under [vars] below.

[vars]
# SUPABASE_URL = "https://xyz.supabase.co"  # prefer to set in Cloudflare dashboard or via wrangler env
# MONITORING_WEBHOOK_URL = "https://hooks.example.com/your-monitor"
# Optional Sentry DSN for server-side error reporting
# SENTRY_DSN = "https://<public_key>@sentry.io/<project_id>"
# Optional client-side Sentry DSN for frontend (VITE_SENTRY_DSN can be set in your build environment)
# VITE_SENTRY_DSN = "https://<public_key>@sentry.io/<project_id>"
# Rate limiting config (per-IP)
# RATE_LIMIT_MAX = "60"          # max requests
# RATE_LIMIT_WINDOW = "60"       # window seconds
# Optional OAuth/GitHub settings (register an OAuth App and set the callback to https://<your-host>/api/auth/github/callback)
# GITHUB_CLIENT_ID = ""
# GITHUB_CLIENT_SECRET = ""
# ADMIN_GITHUB_USERS = "ghuser1,ghuser2"
# ADMIN_GITHUB_ORGS = "org1,org2"  # only allow users in these orgs
# JWT settings for Admin UI
# ADMIN_USERNAME = "admin"
# ADMIN_PASSWORD = "strongpassword"
# ADMIN_JWT_SECRET = "supersecret"
# ADMIN_JWT_EXPIRES = "86400"
# Optional env name for Sentry
# WORKER_ENV = "production"
# SENTRY_RELEASE = ""

# KV namespaces (for storing transient OAuth state / allowlist etc.)
[[kv_namespaces]]
binding = "OAUTH_KV"
id = "<YOUR_KV_NAMESPACE_ID>"  # create a KV namespace and put the id here or set via wrangler/dashboard
